{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/router\";\nfunction CartComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1, \"Cargando carrito...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CartComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.error, \" \");\n  }\n}\nfunction CartComponent_div_5_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9)(1, \"p\");\n    i0.ɵɵtext(2, \"El carrito est\\u00E1 vac\\u00EDo.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"a\", 10);\n    i0.ɵɵtext(4, \"Continuar comprando\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction CartComponent_div_5_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵelement(1, \"img\", 12);\n    i0.ɵɵelementStart(2, \"div\", 13)(3, \"h3\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 14);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_5_div_2_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const item_r6 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.removeFromCart(item_r6));\n    });\n    i0.ɵɵelementStart(11, \"span\", 16);\n    i0.ɵɵtext(12, \"\\u00D7\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r6 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", item_r6.urlImage, i0.ɵɵsanitizeUrl)(\"alt\", item_r6.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r6.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind4(7, 5, item_r6.price, \"MXN\", \"symbol\", \"1.2-2\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Descripci\\u00F3n: \", item_r6.description, \"\");\n  }\n}\nfunction CartComponent_div_5_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17)(1, \"h3\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 18);\n    i0.ɵɵtext(5, \"Proceder al pago\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Total: \", i0.ɵɵpipeBind4(3, 1, ctx_r5.getTotal(), \"USD\", \"symbol\", \"1.2-2\"), \"\");\n  }\n}\nfunction CartComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, CartComponent_div_5_div_1_Template, 5, 0, \"div\", 6);\n    i0.ɵɵtemplate(2, CartComponent_div_5_div_2_Template, 13, 10, \"div\", 7);\n    i0.ɵɵtemplate(3, CartComponent_div_5_div_3_Template, 6, 6, \"div\", 8);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.cartItems.length === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.cartItems);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.cartItems.length > 0);\n  }\n}\nexport class CartComponent {\n  constructor() {\n    this.cartItems = [];\n    this.loading = false;\n    this.error = null;\n  }\n  ngOnInit() {\n    this.loadCartFromLocalStorage();\n  }\n  loadCartFromLocalStorage() {\n    this.loading = true;\n    try {\n      const cartData = localStorage.getItem('cart');\n      if (cartData) {\n        this.cartItems = JSON.parse(cartData);\n      }\n      this.loading = false;\n    } catch (e) {\n      this.error = 'Error al cargar el carrito';\n      this.loading = false;\n    }\n  }\n  saveCartToLocalStorage() {\n    try {\n      localStorage.setItem('cart', JSON.stringify(this.cartItems));\n    } catch (e) {\n      this.error = 'Error al guardar el carrito';\n    }\n  }\n  addToCart(product) {\n    this.cartItems.push(product);\n    this.saveCartToLocalStorage();\n  }\n  removeFromCart(product) {\n    const index = this.cartItems.findIndex(item => item.idProduct === product.idProduct);\n    if (index > -1) {\n      this.cartItems.splice(index, 1);\n      this.saveCartToLocalStorage();\n    }\n  }\n  getTotal() {\n    return this.cartItems.reduce((total, item) => {\n      const itemPrice = this.parsePrice(item.price);\n      return total + itemPrice;\n    }, 0);\n  }\n  parsePrice(price) {\n    if (typeof price === 'number') {\n      return price;\n    }\n    if (typeof price === 'string') {\n      const cleanedPrice = price.replace(/[^\\d.-]/g, '');\n      const parsedPrice = parseFloat(cleanedPrice);\n      return isNaN(parsedPrice) ? 0 : parsedPrice;\n    }\n    return 0;\n  }\n  static #_ = this.ɵfac = function CartComponent_Factory(t) {\n    return new (t || CartComponent)();\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CartComponent,\n    selectors: [[\"app-cart\"]],\n    decls: 6,\n    vars: 3,\n    consts: [[1, \"cart-container\"], [\"class\", \"loading\", 4, \"ngIf\"], [\"class\", \"error-message\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"loading\"], [1, \"error-message\"], [\"class\", \"empty-cart\", 4, \"ngIf\"], [\"class\", \"cart-item\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"cart-total\", 4, \"ngIf\"], [1, \"empty-cart\"], [\"routerLink\", \"/products\", 1, \"continue-shopping\"], [1, \"cart-item\"], [1, \"cart-item-image\", 3, \"src\", \"alt\"], [1, \"cart-item-details\"], [1, \"item-price\"], [\"title\", \"Eliminar producto\", 1, \"remove-button\", 3, \"click\"], [1, \"remove-icon\"], [1, \"cart-total\"], [1, \"checkout-button\"]],\n    template: function CartComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n        i0.ɵɵtext(2, \"Carrito de Compras\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, CartComponent_div_3_Template, 2, 0, \"div\", 1);\n        i0.ɵɵtemplate(4, CartComponent_div_4_Template, 2, 1, \"div\", 2);\n        i0.ɵɵtemplate(5, CartComponent_div_5_Template, 4, 3, \"div\", 3);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.error);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.loading && !ctx.error);\n      }\n    },\n    dependencies: [i1.NgForOf, i1.NgIf, i2.RouterLink, i1.CurrencyPipe],\n    styles: [\".cart-container[_ngcontent-%COMP%] {\\n      max-width: 800px;\\n      margin: 0 auto;\\n      padding: 20px;\\n      font-family: Arial, sans-serif;\\n    }\\n  \\n    h2[_ngcontent-%COMP%] {\\n      text-align: center;\\n      color: #333;\\n      margin-bottom: 20px;\\n    }\\n  \\n    .cart-item[_ngcontent-%COMP%] {\\n      display: flex;\\n      align-items: center;\\n      margin-bottom: 15px;\\n      padding: 15px;\\n      border: 1px solid #e0e0e0;\\n      border-radius: 8px;\\n      transition: box-shadow 0.3s ease;\\n    }\\n  \\n    .cart-item[_ngcontent-%COMP%]:hover {\\n      box-shadow: 0 2px 5px rgba(0,0,0,0.1);\\n    }\\n  \\n    .cart-item-image[_ngcontent-%COMP%] {\\n      width: 80px;\\n      height: 80px;\\n      object-fit: cover;\\n      margin-right: 15px;\\n      border-radius: 4px;\\n    }\\n  \\n    .cart-item-details[_ngcontent-%COMP%] {\\n      flex-grow: 1;\\n    }\\n  \\n    .cart-item-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\n      margin: 0 0 5px 0;\\n      color: #333;\\n    }\\n  \\n    .item-price[_ngcontent-%COMP%] {\\n      font-weight: bold;\\n      color: #4a4a4a;\\n    }\\n  \\n    .remove-button[_ngcontent-%COMP%] {\\n      background-color: transparent;\\n      border: none;\\n      color: #ff4d4d;\\n      font-size: 24px;\\n      cursor: pointer;\\n      transition: transform 0.2s ease, color 0.2s ease;\\n      width: 30px;\\n      height: 30px;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      border-radius: 50%;\\n    }\\n  \\n    .remove-button[_ngcontent-%COMP%]:hover {\\n      transform: scale(1.1);\\n      color: #ff0000;\\n      background-color: rgba(255, 0, 0, 0.1);\\n    }\\n  \\n    .remove-icon[_ngcontent-%COMP%] {\\n      line-height: 1;\\n    }\\n  \\n    .cart-total[_ngcontent-%COMP%] {\\n      margin-top: 20px;\\n      text-align: right;\\n      padding-top: 15px;\\n      border-top: 2px solid #e0e0e0;\\n    }\\n  \\n    .cart-total[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\n      margin-bottom: 15px;\\n    }\\n  \\n    .checkout-button[_ngcontent-%COMP%] {\\n      background-color: #4CAF50;\\n      color: white;\\n      padding: 10px 20px;\\n      border: none;\\n      border-radius: 4px;\\n      cursor: pointer;\\n      font-size: 16px;\\n      transition: background-color 0.3s ease;\\n    }\\n  \\n    .checkout-button[_ngcontent-%COMP%]:hover {\\n      background-color: #45a049;\\n    }\\n  \\n    .empty-cart[_ngcontent-%COMP%] {\\n      text-align: center;\\n      padding: 20px;\\n      background-color: #f8f8f8;\\n      border-radius: 8px;\\n    }\\n  \\n    .continue-shopping[_ngcontent-%COMP%] {\\n      display: inline-block;\\n      margin-top: 10px;\\n      padding: 10px 20px;\\n      background-color: #007bff;\\n      color: white;\\n      text-decoration: none;\\n      border-radius: 4px;\\n      transition: background-color 0.3s ease;\\n    }\\n  \\n    .continue-shopping[_ngcontent-%COMP%]:hover {\\n      background-color: #0056b3;\\n    }\\n  \\n    .loading[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%] {\\n      text-align: center;\\n      margin: 20px 0;\\n    }\\n  \\n    .error-message[_ngcontent-%COMP%] {\\n      color: #ff4d4d;\\n    }\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["i0","CartComponent","constructor","ngOnInit","loadCartFromLocalStorage","loading","cartData","localStorage","getItem","cartItems","JSON","parse","e","error","saveCartToLocalStorage","setItem","stringify","addToCart","product","push","removeFromCart","index","findIndex","item","idProduct","splice","getTotal","reduce","total","itemPrice","parsePrice","price","cleanedPrice","replace","parsedPrice","parseFloat","isNaN","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\cruza\\Ecommerce Front\\src\\components\\cart\\cart.component.html","C:\\Users\\cruza\\Ecommerce Front\\src\\components\\cart\\cart.component.ts"],"sourcesContent":["<div class=\"cart-container\">\r\n    <h2>Carrito de Compras</h2>\r\n    \r\n    <div *ngIf=\"loading\" class=\"loading\">Cargando carrito...</div>\r\n  \r\n    <div *ngIf=\"error\" class=\"error-message\">\r\n      {{ error }}\r\n    </div>\r\n  \r\n    <div *ngIf=\"!loading && !error\">\r\n      <div *ngIf=\"cartItems.length === 0\" class=\"empty-cart\">\r\n        <p>El carrito está vacío.</p>\r\n        <a routerLink=\"/products\" class=\"continue-shopping\">Continuar comprando</a>\r\n      </div>\r\n      <div *ngFor=\"let item of cartItems\" class=\"cart-item\">\r\n        <img [src]=\"item.urlImage\" [alt]=\"item.name\" class=\"cart-item-image\">\r\n        <div class=\"cart-item-details\">\r\n          <h3>{{ item.name }}</h3>\r\n          <p class=\"item-price\">{{ (item.price) | currency:'MXN':'symbol':'1.2-2' }}</p>\r\n          <p>Descripción: {{ item.description }}</p>\r\n        </div>\r\n        <button (click)=\"removeFromCart(item)\" class=\"remove-button\" title=\"Eliminar producto\">\r\n          <span class=\"remove-icon\">×</span>\r\n        </button>\r\n      </div>\r\n      <div *ngIf=\"cartItems.length > 0\" class=\"cart-total\">\r\n        <h3>Total: {{ getTotal() | currency:'USD':'symbol':'1.2-2' }}</h3>\r\n        <button class=\"checkout-button\">Proceder al pago</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \r\n  <!-- Estilos del componente -->\r\n  <style>\r\n    .cart-container {\r\n      max-width: 800px;\r\n      margin: 0 auto;\r\n      padding: 20px;\r\n      font-family: Arial, sans-serif;\r\n    }\r\n  \r\n    h2 {\r\n      text-align: center;\r\n      color: #333;\r\n      margin-bottom: 20px;\r\n    }\r\n  \r\n    .cart-item {\r\n      display: flex;\r\n      align-items: center;\r\n      margin-bottom: 15px;\r\n      padding: 15px;\r\n      border: 1px solid #e0e0e0;\r\n      border-radius: 8px;\r\n      transition: box-shadow 0.3s ease;\r\n    }\r\n  \r\n    .cart-item:hover {\r\n      box-shadow: 0 2px 5px rgba(0,0,0,0.1);\r\n    }\r\n  \r\n    .cart-item-image {\r\n      width: 80px;\r\n      height: 80px;\r\n      object-fit: cover;\r\n      margin-right: 15px;\r\n      border-radius: 4px;\r\n    }\r\n  \r\n    .cart-item-details {\r\n      flex-grow: 1;\r\n    }\r\n  \r\n    .cart-item-details h3 {\r\n      margin: 0 0 5px 0;\r\n      color: #333;\r\n    }\r\n  \r\n    .item-price {\r\n      font-weight: bold;\r\n      color: #4a4a4a;\r\n    }\r\n  \r\n    .remove-button {\r\n      background-color: transparent;\r\n      border: none;\r\n      color: #ff4d4d;\r\n      font-size: 24px;\r\n      cursor: pointer;\r\n      transition: transform 0.2s ease, color 0.2s ease;\r\n      width: 30px;\r\n      height: 30px;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      border-radius: 50%;\r\n    }\r\n  \r\n    .remove-button:hover {\r\n      transform: scale(1.1);\r\n      color: #ff0000;\r\n      background-color: rgba(255, 0, 0, 0.1);\r\n    }\r\n  \r\n    .remove-icon {\r\n      line-height: 1;\r\n    }\r\n  \r\n    .cart-total {\r\n      margin-top: 20px;\r\n      text-align: right;\r\n      padding-top: 15px;\r\n      border-top: 2px solid #e0e0e0;\r\n    }\r\n  \r\n    .cart-total h3 {\r\n      margin-bottom: 15px;\r\n    }\r\n  \r\n    .checkout-button {\r\n      background-color: #4CAF50;\r\n      color: white;\r\n      padding: 10px 20px;\r\n      border: none;\r\n      border-radius: 4px;\r\n      cursor: pointer;\r\n      font-size: 16px;\r\n      transition: background-color 0.3s ease;\r\n    }\r\n  \r\n    .checkout-button:hover {\r\n      background-color: #45a049;\r\n    }\r\n  \r\n    .empty-cart {\r\n      text-align: center;\r\n      padding: 20px;\r\n      background-color: #f8f8f8;\r\n      border-radius: 8px;\r\n    }\r\n  \r\n    .continue-shopping {\r\n      display: inline-block;\r\n      margin-top: 10px;\r\n      padding: 10px 20px;\r\n      background-color: #007bff;\r\n      color: white;\r\n      text-decoration: none;\r\n      border-radius: 4px;\r\n      transition: background-color 0.3s ease;\r\n    }\r\n  \r\n    .continue-shopping:hover {\r\n      background-color: #0056b3;\r\n    }\r\n  \r\n    .loading, .error-message {\r\n      text-align: center;\r\n      margin: 20px 0;\r\n    }\r\n  \r\n    .error-message {\r\n      color: #ff4d4d;\r\n    }\r\n  </style>","import { Component, OnInit } from '@angular/core';\r\nimport { Product } from 'src/app/model/product';\r\n\r\n@Component({\r\n  selector: 'app-cart',\r\n  templateUrl: './cart.component.html',\r\n})\r\nexport class CartComponent implements OnInit {\r\n  cartItems: Product[] = [];\r\n  loading: boolean = false;\r\n  error: string | null = null;\r\n\r\n  ngOnInit() {\r\n    this.loadCartFromLocalStorage();\r\n  }\r\n\r\n  loadCartFromLocalStorage() {\r\n    this.loading = true;\r\n    try {\r\n      const cartData = localStorage.getItem('cart');\r\n      if (cartData) {\r\n        this.cartItems = JSON.parse(cartData);\r\n      }\r\n      this.loading = false;\r\n    } catch (e) {\r\n      this.error = 'Error al cargar el carrito';\r\n      this.loading = false;\r\n    }\r\n  }\r\n\r\n  saveCartToLocalStorage() {\r\n    try {\r\n      localStorage.setItem('cart', JSON.stringify(this.cartItems));\r\n    } catch (e) {\r\n      this.error = 'Error al guardar el carrito';\r\n    }\r\n  }\r\n\r\n  addToCart(product: Product) {\r\n    this.cartItems.push(product);\r\n    this.saveCartToLocalStorage();\r\n  }\r\n\r\n  removeFromCart(product: Product) {\r\n    const index = this.cartItems.findIndex(item => item.idProduct === product.idProduct);\r\n    if (index > -1) {\r\n      this.cartItems.splice(index, 1);\r\n      this.saveCartToLocalStorage();\r\n    }\r\n  }\r\n\r\n  getTotal(): number {\r\n    return this.cartItems.reduce((total, item) => {\r\n      const itemPrice = this.parsePrice(item.price);\r\n      return total + itemPrice;\r\n    }, 0);\r\n  }\r\n\r\n  private parsePrice(price: unknown): number {\r\n    if (typeof price === 'number') {\r\n      return price;\r\n    }\r\n    if (typeof price === 'string') {\r\n      const cleanedPrice = price.replace(/[^\\d.-]/g, '');\r\n      const parsedPrice = parseFloat(cleanedPrice);\r\n      return isNaN(parsedPrice) ? 0 : parsedPrice;\r\n    }\r\n    return 0;\r\n  }\r\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}